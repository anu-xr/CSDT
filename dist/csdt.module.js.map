{"version":3,"file":"csdt.module.js","sources":["../src/child.js","../src/base.js","../src/csdt.js"],"sourcesContent":["import Base from './base';\r\nimport * as Y from 'yjs';\r\n\r\n//manages connections as a child site\r\nexport default class CSDTChild extends Base {\r\n  constructor() {\r\n    super();\r\n\r\n    window.document.addEventListener('CSDT-check-support', () => {\r\n      const response = new CustomEvent('CSDT-response-check-support', { detail: this.version });\r\n      window.parent.document.dispatchEvent(response);\r\n    });\r\n\r\n    window.document.addEventListener('CSDT-y-update', (e) => {\r\n      const update = e.detail;\r\n      Y.applyUpdate(this.ydoc, update);\r\n    });\r\n\r\n    this.ydoc.on('update', (update, _origin, _doc, _tr) => {\r\n      const event = new CustomEvent('CSDT-y-update', { detail: update });\r\n      window.parent.document.dispatchEvent(event);\r\n    });\r\n  }\r\n}\r\n","import * as Y from 'yjs';\r\n\r\n//base CSDT object\r\n//both the parent and child implementation extend from this\r\nexport default class Base {\r\n  constructor() {\r\n    this.version = '0.1.0';\r\n    this.ydoc = new Y.Doc();\r\n  }\r\n}\r\n","import CSDTChild from './child';\r\n\r\nwindow.CSDT = new CSDTChild();\r\n"],"names":["CSDTChild","_this","window","document","addEventListener","response","CustomEvent","detail","version","parent","dispatchEvent","e","Y","applyUpdate","ydoc","on","update","_origin","_doc","_tr","event","this","Doc","CSDT"],"mappings":"sHAIqBA,sBACnB,mBAAc,OACZC,qBAEAC,OAAOC,SAASC,iBAAiB,qBAAsB,WACrD,IAAMC,EAAW,IAAIC,YAAY,8BAA+B,CAAEC,OAAQN,EAAKO,UAC/EN,OAAOO,OAAON,SAASO,cAAcL,KAGvCH,OAAOC,SAASC,iBAAiB,gBAAiB,SAACO,GAEjDC,EAAEC,YAAYZ,EAAKa,KADJH,EAAEJ,UAInBN,EAAKa,KAAKC,GAAG,SAAU,SAACC,EAAQC,EAASC,EAAMC,GAC7C,IAAMC,EAAQ,IAAId,YAAY,gBAAiB,CAAEC,OAAQS,IACzDd,OAAOO,OAAON,SAASO,cAAcU,iGCfzC,WACEC,KAAKb,QAAU,QACfa,KAAKP,KAAO,IAAIF,EAAEU,MCLtBpB,OAAOqB,KAAO,IAAIvB"}