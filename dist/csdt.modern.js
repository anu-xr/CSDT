import*as e from"yjs";class t{constructor(){this.version="0.1.0",this.ydoc=new e.Doc,document.addEventListener("CSDT-y-update",t=>{e.applyUpdate(this.ydoc,t.detail)})}}class n extends t{constructor(e){super(),this.iframe=e,this.ydoc.on("update",(e,t,n,s)=>{const o=new CustomEvent("CSDT-y-update",{detail:e});this.iframe.contentDocument.dispatchEvent(o)})}checkSupport(){return new Promise((e,t)=>{window.document.addEventListener("CSDT-response-check-support",t=>e(t.detail),{once:!0});const n=new CustomEvent("CSDT-check-support");this.iframe.contentDocument.dispatchEvent(n)})}openPortal(e=!1,t=!1){return new Promise((n,s)=>{window.document.addEventListener("CSDT-response-portal-open",e=>n(e.detail),{once:!0});const o=new CustomEvent("CSDT-portal-open",{detail:{recievesThree:e,sendsThree:t}});this.iframe.contentDocument.dispatchEvent(o)})}}class s extends t{constructor(){super(),this.ydoc.on("update",(e,t,n,s)=>{const o=new CustomEvent("CSDT-y-update",{detail:e});parent.document.dispatchEvent(o)}),document.addEventListener("CSDT-check-support",()=>{const e=new CustomEvent("CSDT-response-check-support",{detail:this.version});parent.document.dispatchEvent(e)})}responsePortalOpen(e=!1,t=!1,n=!1){const s=new CustomEvent("CSDT-response-portal-open",{detail:{hasReturnPortal:e,sendsThree:t,recievesThree:n}});parent.document.dispatchEvent(s)}}export{s as CSDTChild,n as CSDTParent};
//# sourceMappingURL=csdt.modern.js.map
