import*as t from"yjs";function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=function(){var e=this;this.version="0.1.0",this.ydoc=new t.Doc,document.addEventListener("CSDT-y-update",function(n){t.applyUpdate(e.ydoc,n.detail)})},r=function(t){function n(e){var n;return(n=t.call(this)||this).iframe=e,n.ydoc.on("update",function(t,e,o,r){var c=new CustomEvent("CSDT-y-update",{detail:t});n.iframe.contentDocument.dispatchEvent(c)}),n}e(n,t);var o=n.prototype;return o.checkSupport=function(){var t=this;return new Promise(function(e,n){window.document.addEventListener("CSDT-response-check-support",function(t){return e(t.detail)},{once:!0});var o=new CustomEvent("CSDT-check-support");t.iframe.contentDocument.dispatchEvent(o)})},o.openPortal=function(t,e){var n=this;return void 0===t&&(t=!1),void 0===e&&(e=!1),new Promise(function(o,r){window.document.addEventListener("CSDT-response-portal-open",function(t){return o(t.detail)},{once:!0});var c=new CustomEvent("CSDT-portal-open",{detail:{recievesThree:t,sendsThree:e}});n.iframe.contentDocument.dispatchEvent(c)})},n}(o),c=function(t){function n(){var e;return(e=t.call(this)||this).ydoc.on("update",function(t,e,n,o){var r=new CustomEvent("CSDT-y-update",{detail:t});parent.document.dispatchEvent(r)}),document.addEventListener("CSDT-check-support",function(){var t=new CustomEvent("CSDT-response-check-support",{detail:e.version});parent.document.dispatchEvent(t)}),e}return e(n,t),n.prototype.responsePortalOpen=function(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1);var o=new CustomEvent("CSDT-response-portal-open",{detail:{hasReturnPortal:t,sendsThree:e,recievesThree:n}});parent.document.dispatchEvent(o)},n}(o);export{c as CSDTChild,r as CSDTParent};
//# sourceMappingURL=csdt.module.js.map
