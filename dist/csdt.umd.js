!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("yjs")):"function"==typeof define&&define.amd?define(["exports","yjs"],t):t((e||self).csdt={},e.yjs)}(this,function(e,t){function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var o=n(t);function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(){var e=this;this.version="0.1.0",this.ydoc=new o.Doc,document.addEventListener("CSDT-y-update",function(t){o.applyUpdate(e.ydoc,t.detail)})},u=function(e){function t(t){var n;return(n=e.call(this)||this).iframe=t,n.ydoc.on("update",function(e,t,o,r){var i=new CustomEvent("CSDT-y-update",{detail:e});n.iframe.contentDocument.dispatchEvent(i)}),n}r(t,e);var n=t.prototype;return n.checkSupport=function(){var e=this;return new Promise(function(t,n){window.document.addEventListener("CSDT-response-check-support",function(e){return t(e.detail)},{once:!0});var o=new CustomEvent("CSDT-check-support");e.iframe.contentDocument.dispatchEvent(o)})},n.openPortal=function(e,t){var n=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),new Promise(function(o,r){window.document.addEventListener("CSDT-response-portal-open",function(e){return o(e.detail)},{once:!0});var i=new CustomEvent("CSDT-portal-open",{detail:{recievesThree:e,sendsThree:t}});n.iframe.contentDocument.dispatchEvent(i)})},t}(c);e.CSDTChild=function(e){function t(){var t;return(t=e.call(this)||this).ydoc.on("update",function(e,t,n,o){var r=new CustomEvent("CSDT-y-update",{detail:e});parent.document.dispatchEvent(r)}),document.addEventListener("CSDT-check-support",function(){var e=new CustomEvent("CSDT-response-check-support",{detail:t.version});parent.document.dispatchEvent(e)}),t}return r(t,e),t.prototype.responsePortalOpen=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var o=new CustomEvent("CSDT-response-portal-open",{detail:{hasReturnPortal:e,sendsThree:t,recievesThree:n}});parent.document.dispatchEvent(o)},t}(c),e.CSDTParent=u});
//# sourceMappingURL=csdt.umd.js.map
