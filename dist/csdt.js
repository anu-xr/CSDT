function e(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var t=e(require("yjs"));function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(){var e=this;this.version="0.1.0",this.ydoc=new t.Doc,document.addEventListener("CSDT-y-update",function(n){t.applyUpdate(e.ydoc,n.detail)})},c=function(e){function t(t){var n;return(n=e.call(this)||this).iframe=t,n.ydoc.on("update",function(e,t,o,r){var c=new CustomEvent("CSDT-y-update",{detail:e});n.iframe.contentDocument.dispatchEvent(c)}),n}n(t,e);var o=t.prototype;return o.checkSupport=function(){var e=this;return new Promise(function(t,n){window.document.addEventListener("CSDT-response-check-support",function(e){return t(e.detail)},{once:!0});var o=new CustomEvent("CSDT-check-support");e.iframe.contentDocument.dispatchEvent(o)})},o.openPortal=function(e,t){var n=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),new Promise(function(o,r){window.document.addEventListener("CSDT-response-portal-open",function(e){return o(e.detail)},{once:!0});var c=new CustomEvent("CSDT-portal-open",{detail:{recievesThree:e,sendsThree:t}});n.iframe.contentDocument.dispatchEvent(c)})},t}(r);exports.CSDTChild=function(e){function t(){var t;return(t=e.call(this)||this).ydoc.on("update",function(e,t,n,o){var r=new CustomEvent("CSDT-y-update",{detail:e});parent.document.dispatchEvent(r)}),document.addEventListener("CSDT-check-support",function(){var e=new CustomEvent("CSDT-response-check-support",{detail:t.version});parent.document.dispatchEvent(e)}),t}return n(t,e),t.prototype.responsePortalOpen=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var o=new CustomEvent("CSDT-response-portal-open",{detail:{hasReturnPortal:e,sendsThree:t,recievesThree:n}});parent.document.dispatchEvent(o)},t}(r),exports.CSDTParent=c;
//# sourceMappingURL=csdt.js.map
