{"version":3,"file":"csdt.modern.js","sources":["../src/csdt.js","../src/base.js","../src/child.js"],"sourcesContent":["import CSDTChild from './child';\r\n\r\nwindow.CSDT = new CSDTChild();\r\n","import * as Y from 'yjs';\r\n\r\n//base CSDT object\r\n//both the parent and child implementation extend from this\r\nexport default class Base {\r\n  constructor() {\r\n    this.version = '0.1.0';\r\n    this.ydoc = new Y.Doc();\r\n  }\r\n}\r\n","import Base from './base';\r\nimport * as Y from 'yjs';\r\n\r\n//manages connections as a child site\r\nexport default class CSDTChild extends Base {\r\n  constructor() {\r\n    super();\r\n\r\n    window.document.addEventListener('CSDT-check-support', () => {\r\n      const response = new CustomEvent('CSDT-response-check-support', { detail: this.version });\r\n      window.parent.document.dispatchEvent(response);\r\n    });\r\n\r\n    window.document.addEventListener('CSDT-y-update', (e) => {\r\n      const update = e.detail;\r\n      Y.applyUpdate(this.ydoc, update);\r\n    });\r\n\r\n    this.ydoc.on('update', (update, _origin, _doc, _tr) => {\r\n      const event = new CustomEvent('CSDT-y-update', { detail: update });\r\n      window.parent.document.dispatchEvent(event);\r\n    });\r\n  }\r\n}\r\n"],"names":["window","CSDT","constructor","this","version","ydoc","Y","Doc","super","document","addEventListener","response","CustomEvent","detail","parent","dispatchEvent","e","applyUpdate","on","update","_origin","_doc","_tr","event"],"mappings":"sBAEAA,OAAOC,KAAO,wBCGZC,cACEC,KAAKC,QAAU,QACfD,KAAKE,KAAO,IAAIC,EAAEC,MCFpBL,cACEM,QAEAR,OAAOS,SAASC,iBAAiB,qBAAsB,KACrD,MAAMC,EAAW,IAAIC,YAAY,8BAA+B,CAAEC,OAAQV,KAAKC,UAC/EJ,OAAOc,OAAOL,SAASM,cAAcJ,KAGvCX,OAAOS,SAASC,iBAAiB,gBAAkBM,IAEjDV,EAAEW,YAAYd,KAAKE,KADJW,EAAEH,UAInBV,KAAKE,KAAKa,GAAG,SAAU,CAACC,EAAQC,EAASC,EAAMC,KAC7C,MAAMC,EAAQ,IAAIX,YAAY,gBAAiB,CAAEC,OAAQM,IACzDnB,OAAOc,OAAOL,SAASM,cAAcQ"}